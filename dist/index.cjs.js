"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t);const a=(e=20,t="",r=!0)=>{let o=Math.random().toString(36).slice(2,2+e);return o=r?o.replace(/[0-9]/g,""):o,o.length!==e?a(e-o.length,t.concat(o),r):t.concat(o)},n=/(@media)(.*?)(\}\s+\})/gm,s=/(&)(.*?)(\})/gm,l=(e,t,r={})=>e.reduce(((e,o,a)=>{var n;const s=t[a];let l="";return"function"==typeof s?l=null!==(n=s(r))&&void 0!==n?n:"":"string"==typeof s&&(l=s),e.concat(o,l)}),""),i=e=>e.replace(/\s{1,}/gm," ").replace(/\n/gm,"").trim(),c=(e,t)=>{let r=e;const o=r.match(t)||[];return o&&o.length>0&&o.forEach((e=>{const t=r.indexOf(e);r=r.slice(0,t).concat(r.slice(t+e.length))})),[r,o]},d=e=>{try{const[t,r]=c(e,n),[o,a]=c(t,s);return{mediaQueries:r,psuedoClasses:a,keyValue:o.split(";").map((e=>e.trim())).filter((e=>e.length>0))}}catch(e){return console.warn(`Resultant CSS is invalid: ${e}`),{mediaQueries:[],psuedoClasses:[],keyValue:[]}}},u=(e,t)=>{const{keyValue:r,psuedoClasses:o,mediaQueries:a}=e;let n="";return n=r&&r.length>0?`.${t} { ${r.join(";\n").concat(";")} }\n`:"",n+=o&&o.length>0?`${o.join("\n")}\n`:"",n+=a&&a.length>0?`${a.join("\n")}\n`:"",n.replace(/&/gm,"."+t)},m=(e,t)=>{const r=document.createElement("style");return r.innerHTML=t,r.id=e,r},p=t.createContext(null),h=t.createContext(null),g=()=>t.useContext(h)||{},f=(e,r,n=[],s=!1)=>{const c=a();return a=>{const h=`micro-styled-${c}`,f={className:c},{theme:b}=g(),{container:y}=null!==(v=t.useContext(p))&&void 0!==v?v:{container:document.head};var v;const x=u(d(i(l(r,n,b?Object.assign(Object.assign({},a),{config:f,theme:b}):Object.assign(Object.assign({},a),{config:f})))),c),k=t.useRef(null);return t.useEffect((()=>(k.current&&(k.current.classList.add(c),y.appendChild(m(h,x))),()=>{var e,t;null===(e=k.current)||void 0===e||e.classList.remove(c),null===(t=y.querySelector(h))||void 0===t||t.remove()}))),s?o.default.createElement(e,Object.assign({key:c},a,{ref:k})):o.default.createElement(e,Object.assign({key:c},a,{ref:k}),a.children)}},b=(e,t=!1)=>(r,...o)=>f(e,r,o,t);var y={a:b("a"),address:b("address"),area:b("area"),article:b("article"),aside:b("aside"),audio:b("audio"),b:b("b"),base:b("base"),bdi:b("bdi"),bdo:b("bdo"),blockquote:b("blockquote"),br:b("br",!0),button:b("button"),canvas:b("canvas"),cite:b("cite"),code:b("code"),col:b("col"),colgroup:b("colgroup"),data:b("data"),datalist:b("datalist"),dd:b("dd"),del:b("del"),details:b("details"),dfn:b("dfn"),dialog:b("dialog"),div:b("div"),dl:b("dl"),dt:b("dt"),em:b("em"),embed:b("embed"),fieldset:b("fieldset"),figcaption:b("figcaption"),figure:b("figure"),footer:b("footer"),form:b("form"),h1:b("h1"),h2:b("h2"),h3:b("h3"),h4:b("h4"),h5:b("h5"),h6:b("h6"),header:b("header"),hgroup:b("hgroup"),hr:b("hr",!0),i:b("i"),iframe:b("iframe"),img:b("img",!0),input:b("input",!0),ins:b("ins",!0),kbd:b("kbd"),keygen:b("keygen"),label:b("label"),legend:b("legend"),li:b("li"),link:b("link"),main:b("main"),map:b("map"),mark:b("mark"),menu:b("menu"),menuitem:b("menuitem"),meter:b("meter"),nav:b("nav"),nobr:b("nobr"),noframes:b("noframes"),noscript:b("noscript"),object:b("object"),ol:b("ol"),optgroup:b("optgroup"),option:b("option"),output:b("output"),p:b("p"),picture:b("picture"),plaintext:b("plaintext"),pre:b("pre"),progress:b("progress"),q:b("q"),rp:b("rp"),rt:b("rt"),rtc:b("rtc"),ruby:b("ruby"),s:b("s"),samp:b("samp"),section:b("section"),select:b("select"),shadow:b("shadow"),small:b("small"),span:b("span"),strong:b("strong"),sub:b("sub"),summary:b("summary"),sup:b("sup"),table:b("table"),tbody:b("tbody"),td:b("td"),textarea:b("textarea"),tfoot:b("tfoot"),th:b("th"),thead:b("thead"),time:b("time"),tr:b("tr"),track:b("track"),tt:b("tt"),u:b("u"),ul:b("ul"),varEl:b("var"),video:b("video"),wbr:b("wbr")};exports.GlobalStyleSheet=e=>{const t=a(10,"micro-styled-global-");return o.default.createElement("style",{key:t,id:t},e.stylesheet)},exports.ThemeCacheProvider=r=>a=>{const[n,s]=t.useState(document.head);return t.useEffect((()=>(e.__awaiter(void 0,void 0,void 0,(function*(){const e=n;try{const t="function"==typeof r?yield r():r;t&&e&&(s(t),Array.from(document.querySelectorAll("style[id^=micro-styled]")).filter((e=>!e.id.includes("micro-styled-global"))).forEach((e=>t.appendChild(e))))}catch(e){console.warn(e)}})).catch(console.warn),()=>{Array.from(n.querySelectorAll("style[id^=micro-styled]")).forEach((e=>e.remove()))})),[n]),o.default.createElement(p.Provider,{value:{container:n}},a.children)},exports.ThemeProvider=e=>t=>o.default.createElement(h.Provider,{value:{theme:e}},t.children),exports.createCSSObject=d,exports.createCSSString=u,exports.createStyleElement=m,exports.css=(e={})=>(t,...r)=>{const{theme:o}=g(),a=Object.assign(Object.assign({},e),{theme:o});return l(t,r,a)},exports.default=y,exports.interpolate=l,exports.mediaQueryRegex=n,exports.psuedoClassRegex=s,exports.randomString=a,exports.removeWhitespace=i;
