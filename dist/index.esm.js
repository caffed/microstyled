import{__awaiter as e}from"tslib";import t,{createContext as r,useState as n,useEffect as a,useContext as o,useRef as l}from"react";const i=(e=20,t="",r=!0)=>{let n=Math.random().toString(36).slice(2,2+e);return n=r?n.replace(/[0-9]/g,""):n,n.length!==e?i(e-n.length,t.concat(n),r):t.concat(n)},s=/(@media)(.*?)(\}\s+\})/gm,c=/(&)(.*?)(\})/gm,d=(e,t,r={})=>e.reduce(((e,n,a)=>{var o;const l=t[a];let i="";return"function"==typeof l?i=null!==(o=l(r))&&void 0!==o?o:"":"string"==typeof l&&(i=l),e.concat(n,i)}),""),u=e=>e.replace(/\s{1,}/gm," ").replace(/\n/gm,"").trim(),m=(e,t)=>{let r=e;const n=r.match(t)||[];return n&&n.length>0&&n.forEach((e=>{const t=r.indexOf(e);r=r.slice(0,t).concat(r.slice(t+e.length))})),[r,n]},p=e=>{try{const[t,r]=m(e,s),[n,a]=m(t,c);return{mediaQueries:r,psuedoClasses:a,keyValue:n.split(";").map((e=>e.trim())).filter((e=>e.length>0))}}catch(e){return console.warn(`Resultant CSS is invalid: ${e}`),{mediaQueries:[],psuedoClasses:[],keyValue:[]}}},h=(e,t)=>{const{keyValue:r,psuedoClasses:n,mediaQueries:a}=e;let o="";return o=r&&r.length>0?`.${t} { ${r.join(";\n").concat(";")} }\n`:"",o+=n&&n.length>0?`${n.join("\n")}\n`:"",o+=a&&a.length>0?`${a.join("\n")}\n`:"",o.replace(/&/gm,"."+t)},g=(e,t)=>{const r=document.createElement("style");return r.innerHTML=t,r.id=e,r},b=r(null),f=r=>o=>{const[l,i]=n(document.head);return a((()=>(e(void 0,void 0,void 0,(function*(){const e=l;try{const t="function"==typeof r?yield r():r;t&&e&&(i(t),Array.from(document.querySelectorAll("style[id^=micro-styled]")).filter((e=>!e.id.includes("micro-styled-global"))).forEach((e=>t.appendChild(e))))}catch(e){console.warn(e)}})).catch(console.warn),()=>{Array.from(l.querySelectorAll("style[id^=micro-styled]")).forEach((e=>e.remove()))})),[l]),t.createElement(b.Provider,{value:{container:l}},o.children)},y=r(null),v=()=>o(y)||{},k=e=>r=>t.createElement(y.Provider,{value:{theme:e}},r.children),j=(e={})=>(t,...r)=>{const{theme:n}=v(),a=Object.assign(Object.assign({},e),{theme:n});return d(t,r,a)},E=e=>{const r=i(10,"micro-styled-global-");return t.createElement("style",{key:r,id:r},e.stylesheet)},O=(e,r,n=[],s=!1)=>{const c=i();return i=>{const m=`micro-styled-${c}`,f={className:c},{theme:y}=v(),{container:k}=null!==(j=o(b))&&void 0!==j?j:{container:document.head};var j;const E=h(p(u(d(r,n,y?Object.assign(Object.assign({},i),{config:f,theme:y}):Object.assign(Object.assign({},i),{config:f})))),c),O=l(null);return a((()=>(O.current&&(O.current.classList.add(c),k.appendChild(g(m,E))),()=>{var e,t;null===(e=O.current)||void 0===e||e.classList.remove(c),null===(t=k.querySelector(m))||void 0===t||t.remove()}))),s?t.createElement(e,Object.assign({key:c},i,{ref:O})):t.createElement(e,Object.assign({key:c},i,{ref:O}),i.children)}},q=(e,t=!1)=>(r,...n)=>O(e,r,n,t);var w={a:q("a"),address:q("address"),area:q("area"),article:q("article"),aside:q("aside"),audio:q("audio"),b:q("b"),base:q("base"),bdi:q("bdi"),bdo:q("bdo"),blockquote:q("blockquote"),br:q("br",!0),button:q("button"),canvas:q("canvas"),cite:q("cite"),code:q("code"),col:q("col"),colgroup:q("colgroup"),data:q("data"),datalist:q("datalist"),dd:q("dd"),del:q("del"),details:q("details"),dfn:q("dfn"),dialog:q("dialog"),div:q("div"),dl:q("dl"),dt:q("dt"),em:q("em"),embed:q("embed"),fieldset:q("fieldset"),figcaption:q("figcaption"),figure:q("figure"),footer:q("footer"),form:q("form"),h1:q("h1"),h2:q("h2"),h3:q("h3"),h4:q("h4"),h5:q("h5"),h6:q("h6"),header:q("header"),hgroup:q("hgroup"),hr:q("hr",!0),i:q("i"),iframe:q("iframe"),img:q("img",!0),input:q("input",!0),ins:q("ins",!0),kbd:q("kbd"),keygen:q("keygen"),label:q("label"),legend:q("legend"),li:q("li"),link:q("link"),main:q("main"),map:q("map"),mark:q("mark"),menu:q("menu"),menuitem:q("menuitem"),meter:q("meter"),nav:q("nav"),nobr:q("nobr"),noframes:q("noframes"),noscript:q("noscript"),object:q("object"),ol:q("ol"),optgroup:q("optgroup"),option:q("option"),output:q("output"),p:q("p"),picture:q("picture"),plaintext:q("plaintext"),pre:q("pre"),progress:q("progress"),q:q("q"),rp:q("rp"),rt:q("rt"),rtc:q("rtc"),ruby:q("ruby"),s:q("s"),samp:q("samp"),section:q("section"),select:q("select"),shadow:q("shadow"),small:q("small"),span:q("span"),strong:q("strong"),sub:q("sub"),summary:q("summary"),sup:q("sup"),table:q("table"),tbody:q("tbody"),td:q("td"),textarea:q("textarea"),tfoot:q("tfoot"),th:q("th"),thead:q("thead"),time:q("time"),tr:q("tr"),track:q("track"),tt:q("tt"),u:q("u"),ul:q("ul"),varEl:q("var"),video:q("video"),wbr:q("wbr")};export{E as GlobalStyleSheet,f as ThemeCacheProvider,k as ThemeProvider,p as createCSSObject,h as createCSSString,g as createStyleElement,j as css,w as default,d as interpolate,s as mediaQueryRegex,c as psuedoClassRegex,i as randomString,u as removeWhitespace};
