import{__awaiter as e}from"tslib";import t,{createContext as r,useState as n,useEffect as o,useContext as a,useRef as l}from"react";const i=(e=20,t="",r=!0)=>{let n=Math.random().toString(36).slice(2,2+e);return n=r?n.replace(/[0-9]/g,""):n,n.length!==e?i(e-n.length,t.concat(n),r):t.concat(n)},s=/(@media)(.*?)(\}\s+\})/gm,c=/(&)(.*?)(\})/gm,d=(e,t,r={})=>e.reduce(((e,n,o)=>{var a;const l=t[o];let i="";return"function"==typeof l?i=null!==(a=l(r))&&void 0!==a?a:"":"string"==typeof l&&(i=l),e.concat(n,i)}),""),u=e=>e.replace(/\s{1,}/gm," ").replace(/\n/gm,"").trim(),m=(e,t)=>{let r=e;const n=r.match(t)||[];return n&&n.length>0&&n.forEach((e=>{const t=r.indexOf(e);r=r.slice(0,t).concat(r.slice(t+e.length))})),[r,n]},p=e=>{try{const[t,r]=m(e,s),[n,o]=m(t,c);return{mediaQueries:r,psuedoClasses:o,keyValue:n.split(";").map((e=>e.trim())).filter((e=>e.length>0))}}catch(e){return console.warn(`Resultant CSS is invalid: ${e}`),{mediaQueries:[],psuedoClasses:[],keyValue:[]}}},h=(e,t)=>{const{keyValue:r,psuedoClasses:n,mediaQueries:o}=e;let a="";return a=r&&r.length>0?`.${t} { ${r.join(";\n").concat(";")} }\n`:"",a+=n&&n.length>0?`${n.join("\n")}\n`:"",a+=o&&o.length>0?`${o.join("\n")}\n`:"",a.replace(/&/gm,"."+t)},g=(e,t)=>{const r=document.createElement("style");return r.innerHTML=t,r.id=e,r},b=r(null),f=r=>a=>{const[l,i]=n(document.head);return o((()=>(e(void 0,void 0,void 0,(function*(){const e=l;try{const t="function"==typeof r?yield r():r;t&&e&&(i(t),Array.from(document.querySelectorAll("style[id^=micro-styled]")).filter((e=>!e.id.includes("micro-styled-global"))).forEach((e=>{t.querySelector("#"+e.id)||t.appendChild(e)})))}catch(e){console.warn(e)}})).catch(console.warn),()=>{Array.from(l.querySelectorAll("style[id^=micro-styled]")).forEach((e=>e.remove()))})),[l]),t.createElement(b.Provider,{value:{container:l}},a.children)},y=r(null),v=()=>a(y)||{},k=e=>r=>t.createElement(y.Provider,{value:{theme:e}},r.children),j=(e={})=>(t,...r)=>{const{theme:n}=v(),o=Object.assign(Object.assign({},e),{theme:n});return d(t,r,o)},E=e=>{const r=i(10,"micro-styled-global-");return t.createElement("style",{key:r,id:r},e.stylesheet)},q=(e,r,n=[],s=!1)=>{const c=i();return i=>{const m=`micro-styled-${c}`,f={className:c},{theme:y}=v(),{container:k}=null!==(j=a(b))&&void 0!==j?j:{container:document.head};var j;const E=h(p(u(d(r,n,y?Object.assign(Object.assign({},i),{config:f,theme:y}):Object.assign(Object.assign({},i),{config:f})))),c),q=l(null);return o((()=>(q.current&&(q.current.classList.add(c),k.querySelector("#"+m)||k.appendChild(g(m,E))),()=>{var e,t;null===(e=q.current)||void 0===e||e.classList.remove(c),null===(t=k.querySelector(m))||void 0===t||t.remove()}))),s?t.createElement(e,Object.assign({key:c},i,{ref:q})):t.createElement(e,Object.assign({key:c},i,{ref:q}),i.children)}},O=(e,t=!1)=>(r,...n)=>q(e,r,n,t);var S={a:O("a"),address:O("address"),area:O("area"),article:O("article"),aside:O("aside"),audio:O("audio"),b:O("b"),base:O("base"),bdi:O("bdi"),bdo:O("bdo"),blockquote:O("blockquote"),br:O("br",!0),button:O("button"),canvas:O("canvas"),cite:O("cite"),code:O("code"),col:O("col"),colgroup:O("colgroup"),data:O("data"),datalist:O("datalist"),dd:O("dd"),del:O("del"),details:O("details"),dfn:O("dfn"),dialog:O("dialog"),div:O("div"),dl:O("dl"),dt:O("dt"),em:O("em"),embed:O("embed"),fieldset:O("fieldset"),figcaption:O("figcaption"),figure:O("figure"),footer:O("footer"),form:O("form"),h1:O("h1"),h2:O("h2"),h3:O("h3"),h4:O("h4"),h5:O("h5"),h6:O("h6"),header:O("header"),hgroup:O("hgroup"),hr:O("hr",!0),i:O("i"),iframe:O("iframe"),img:O("img",!0),input:O("input",!0),ins:O("ins",!0),kbd:O("kbd"),keygen:O("keygen"),label:O("label"),legend:O("legend"),li:O("li"),link:O("link"),main:O("main"),map:O("map"),mark:O("mark"),menu:O("menu"),menuitem:O("menuitem"),meter:O("meter"),nav:O("nav"),nobr:O("nobr"),noframes:O("noframes"),noscript:O("noscript"),object:O("object"),ol:O("ol"),optgroup:O("optgroup"),option:O("option"),output:O("output"),p:O("p"),picture:O("picture"),plaintext:O("plaintext"),pre:O("pre"),progress:O("progress"),q:O("q"),rp:O("rp"),rt:O("rt"),rtc:O("rtc"),ruby:O("ruby"),s:O("s"),samp:O("samp"),section:O("section"),select:O("select"),shadow:O("shadow"),small:O("small"),span:O("span"),strong:O("strong"),sub:O("sub"),summary:O("summary"),sup:O("sup"),table:O("table"),tbody:O("tbody"),td:O("td"),textarea:O("textarea"),tfoot:O("tfoot"),th:O("th"),thead:O("thead"),time:O("time"),tr:O("tr"),track:O("track"),tt:O("tt"),u:O("u"),ul:O("ul"),varEl:O("var"),video:O("video"),wbr:O("wbr")};export{E as GlobalStyleSheet,f as ThemeCacheProvider,k as ThemeProvider,p as createCSSObject,h as createCSSString,g as createStyleElement,j as css,S as default,d as interpolate,s as mediaQueryRegex,c as psuedoClassRegex,i as randomString,u as removeWhitespace};
